(this["webpackJsonplearn-to-write-chinese"]=this["webpackJsonplearn-to-write-chinese"]||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);a(62),a(71);for(var n=a(1),r=a.n(n),i=a(17),s=a.n(i),o=a(21),c=a(36),l=a(47),h=a(16),u=a(24),p="\u4eae \u661f \u6211 \u660e \u6811 \u53f6 \u65e5 \u5b69 \u7ea2 \u662f \u5531 \u5b50 \u53cb \u4e60 \u620f \u5b57 \u6c14 \u4f1a \u89c1 \u65e9 \u9e21 \u9ec4 \u9e1f \u5b63 \u843d \u771f \u8bf4 \u8df3 \u7740 \u59b9 \u4e1c \u5c31 \u8fd8 \u5feb \u5f97 \u897f\u4e1c \u6349 \u8db3 \u8ff7 \u7403 \u5f88 \u722c \u85cf \u5411\u5bf9 \u53eb \u53d8 \u95ee \u6210 \u6559 \u56de \u6253 \u8bf7\u8fc7 \u866b \u628a \u9a6e \u9e45 \u6cb3 \u793c \u80cc \u62ff\u91cc \u540e \u8c22 \u8fb9 \u8c8c \u73ed \u5e7c \u56ed \u7167 \u5a46 \u751c \u68a6 \u8001 \u76d2 \u5c3a \u5200 \u65f6 \u6b63 \u6587 \u5177 \u7b14 \u753b \u957f \u653e \u7528 \u603b \u5c3e \u5df4 \u7389 \u5c16 \u7af9 \u82d7 \u542c \u8bdd \u7334 \u7329\u7ed9 \u8fdb \u544a \u7535 \u8bc9 \u5ff5 \u996d \u4e56 \u60f3\u9762 \u4f4f \u524d \u4ece \u540c \u6ca1 \u9001 \u679c \u5de5\u5382 \u4ea7 \u52a8 \u5173 \u627e \u6309 \u5e74 \u8282 \u6843\u8377 \u83ca \u6885 \u51b7 \u5b83 \u6015 \u8eb2 \u52c7 \u6562\u5806 \u4ed7 \u67f3 \u519c \u6c11 \u4f2f \u79cd \u6700 \u7247\u5439 \u6d47 \u71d5 \u7761 \u9192 \u86d9 \u5471 \u5357 \u6905\u5750 \u8eab \u5427 \u684c \u5e03 \u62b1 \u6454 \u58f0 \u8c01\u5462 \u8ba4 \u539f \u75db \u558a \u72fc \u5566 \u8d76 \u6551\u5047 \u6389 \u8def \u78b0 \u54ea \u5440 \u4e24 \u9003 \u8d70\u5979 \u70b9 \u97f3 \u53ef \u4f38 \u7f1d \u5939 \u6839 \u68cd\u4e22 \u7070 \u841d \u535c \u719f \u62d4 \u62c9 \u9f20 \u5495\u549a \u5012 \u62ac \u665a \u5de6 \u53f3 \u600e \u4e48 \u529e\u77e5 \u9053 \u5348 \u8fd9 \u5ea7 \u6d1e \u4ec0 \u5bb3 \u4ed8 \u9876 \u89d2 \u6b7b \u6251 \u671f \u5e26 \u5206 \u6e05 \u4eca \u6628 \u5149 \u9634 \u9519 \u6307 \u62c7 \u98df \u65e0 \u540d\u52a0 \u5171 \u4e8b \u5e2e \u997f \u809a \u72ee \u89c9 \u6bdb\u6c42 \u7b49 \u9999 \u8089 \u5f20 \u7f51 \u54ac \u529b \u554a\u7259 \u5634 \u6f02 \u80e1 \u864e \u8d34 \u624d \u6570 \u66f4\u6735 \u7eb8 \u5706 \u5708 \u4eb2 \u8138 \u773c \u775b \u63a5 \u5916 \u7b28 \u4ee5 \u81ea \u5df1 \u6162 \u96be \u7ec3 \u6bcf \u9897 \u6837 \u56e0 \u4e3a \u79bb \u8fd1 \u8c61 \u8239 \u95ea\u91d1 \u7f8e \u4e3d \u5f53 \u6247 \u6ee1 \u5e72 \u671d \u718a\u5a03 \u6c7d \u8f66 \u5317 \u4eac \u5f80 \u545c \u9e7f \u68ee\u6797 \u91c7 \u8611 \u83c7 \u7bee \u76f4 \u6478 \u82d4 \u6240\u79d1 \u706f \u5e94 \u8be5 \u9898 \u505c \u800c \u7a97 \u521a \u649e \u6bd4 \u8bb0 \u4e32 \u88ab \u591f \u547d \u9888 \u5b9a \u5413 \u5544 \u7834 \u6e56 \u68f5 \u74dc \u900f \u817f \u72d0\u7c97 \u7aff \u72f8 \u8ddf \u9493 \u7529 \u94a9 \u5fd8 \u88c5\u9975 \u7b97 \u6876 \u574f \u5fd9 \u6d17 \u5ffd \u7136 \u5168\u6761 \u602a \u7269 \u732a \u5f71 \u4fe1 \u547c \u7ed3 \u51b0\u679d \u53d1 \u6296 \u6696 \u5c4b \u6cd5 \u4ef6 \u4e8e \u677e\u5e3d \u6234 \u70ed \u5019 \u52b3 \u6d41 \u6c57 \u51c9 \u522b\u6574 \u8fd8 \u89c9 \u76d6 \u601c \u7a9d \u7740 \u75c5 \u53d7\u7fbd \u671b \u9a91 \u884c \u8fdc \u7ecf \u65c1 \u5a76 \u5475\u7a00 \u5947 \u795d \u8d3a \u54df \u8111 \u5446 \u5e8a \u95f9\u949f \u62e8 \u51c6 \u5907 \u5176 \u5b9e \u8f7b \u54cd \u8fdf\u5df2 \u53e0 \u5305 \u7897 \u5199 \u5192 \u60a8 \u4e86".split(/ */),m=0,d={length:0},f=0;f<p.length;f+=3)m++,d["L"+m.toString()]=p[f]+p[f+1]+p[f+2];d.length=m;var g=a(22),k={newChar:[],reviewChar:[],charsToLearn:{},quizQueue:[],seed:0,recogniseHistory:[]};function E(e){var t=1e4*Math.sin(e);return t-Math.floor(t)}function y(e,t){for(var a=e.length;a;){var n=Math.floor(E(t++)*a),r=e[--a];e[a]=e[n],e[n]=r}return{array:e,seed:t}}var v={newListIndex:56},b={complimentsEnabled:!0,compliments:["","\u4f60\u771f~\u68d2\u554a!","\u5389~\u5bb3","\u8bb0\u6027~\u4e0d\u9519","\u68d2\u68d2\u68d2","\u8fd8\u771f\u662f\u96be\u4e0d\u5012\u4f60\u554a","\u4f60\u8bb0\u4f4f\u4e86\uff5e\u8bf6"],encouragementEnabled:!0,encouragement:["\b","\u518d\u60f3\u60f3\u770b","\u54ce\u5440\uff0c\u7b54\u9519\u4e86"],wordsEnabled:!1,maxWords:3},Q=Object(c.b)({chars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PREPARE_RECOGNISE":console.log("reducers.chars",t.payload);var a=t.payload,n=a.newList,r=a.reviewList,i=n.map((function(e){return d[e]})).join("").split(""),s=r.map((function(e){return d[e]})).join("").split(""),o=y(i.concat(s),e.seed),c=o.array,p=o.seed,m=i.concat(c);return Object(u.a)({},e,{newChar:i,reviewChar:s,charsToLearn:i.concat(s).reduce((function(e,t,a,n){return e[t]={tried:0,recognised:!1},e}),{}),quizQueue:m,seed:p});case"START_RECOGNISE":var f=e.recogniseHistory instanceof Array?e.recogniseHistory:[],v=e.newChar instanceof Array?e.newChar:[],b=e.reviewChar instanceof Array?e.reviewChar:[];return Object(u.a)({},e,{recogniseHistory:[].concat(Object(h.a)(f),[{date:new Date,newChar:v,reviewChar:b,finishDate:null}])});case"RECOGNISE":var Q=t.payload,w=Q.theChar,L=Q.recognised;if(w!==e.quizQueue[0])return console.log("Exception! theChar should be the first in queue"),e;var C=e.quizQueue.slice(1),S=e.seed,j=e.recogniseHistory;if(L){if(0===C.length){var z=j[j.length-1];j=[].concat(Object(h.a)(j.slice(0,-1)),[Object(u.a)({},z,{finishDate:new Date})])}}else if(C.length>3){var O=Math.floor(E(S++)*(C.length-3))+3;C.push(C[O]),C[O]=w}else{var x=y(Object(g.filter)(Object(g.toPairs)(e.charsToLearn),(function(e){return e[1].recognised})).map((function(e){return e[0]})),S),W=x.array,D=x.newSeed;S=D,(C=C.concat(W.slice(0,3-C.length))).push(w)}return Object(u.a)({},e,{charsToLearn:Object(u.a)({},e.charsToLearn,Object(l.a)({},w,{tried:e.charsToLearn[w].tried+1,recognised:L})),quizQueue:C,seed:S,recogniseHistory:j});default:return e}},charSheets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NEW":console.log("reducers.charSheets",t.payload);var a=t.payload.newListIndex;return a<1?a=1:a>=d.length&&(a=d.length),Object(u.a)({},e,{newListIndex:a});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SETTINGS":console.log("reducers.settings",t.payload);var a=t.payload,n=a.key,r=a.value,i=Object(u.a)({},e);return i[n]=r,i;case"RESET_SETTINGS":return b;default:return e}}}),w=a(73),L=a.n(w),C=function(){try{var e=localStorage.getItem("state");if(null===e)return void console.log("loadState, state is null");console.log("loadState",e);var t=JSON.parse(e);return console.log("loadState, pared:",t),t}catch(a){return void console.log("loadState, caught err:",a)}}(),S=Object(c.c)(Q,C);S.subscribe(L()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t),console.log("saveState",t.slice(0,100))}catch(a){console.log("saveState, caught err:",a)}}(S.getState())}),1e3));var j=S,z=(a(101),a(102),a(7)),O=a(8),x=a(10),W=a(9),D=(a(103),a(124)),M=a(125),N=a(76),P=a(135),I=a(127),R=a(128),T=a(12),_=a(23),q=a(79),A=a(44),H=function(e){return e.chars},G=function(e){return H(e)?H(e).newChar:[]},U=function(e){return H(e)?Object.entries(H(e).charsToLearn).filter((function(e){var t=Object(A.a)(e,2),a=(t[0],t[1]);return!a.recognised&&a.tried>0})).map((function(e){var t=Object(A.a)(e,2),a=t[0];t[1];return a})):[]},Z=function(e){return H(e)?H(e).quizQueue:[]},F=function(e){return e.charSheets},J=function(e){return F(e)&&F(e).newListIndex||1},B=function(e){return H(e)?H(e).recogniseHistory:[]},K=function(e){return e.settings},V={synth:null,voice:null,utterances:[]},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=void 0,n=new Promise((function(n,r){if(V.synth||(V.synth=window.speechSynthesis),V.synth&&"function"===typeof V.synth.speak&&!V.voice){var i=V.synth.getVoices().filter((function(e){return e.lang.startsWith("zh")}));console.log(i);var s=Array.prototype.concat.apply([],["zh-CN","zh-HK","zh-TW"].map((function(e){return i.filter((function(t){return t.lang===e}))})));s.length>0&&(V.voice=s[0])}if(V.voice){var o=new SpeechSynthesisUtterance(e);o.voice=V.voice,o.onend=n.bind(a),V.synth.speaking||(V.utterances.length=0),V.utterances.push(o),t&&V.synth.cancel(),V.synth.speak(o)}else console.log("speak.reject"),r.bind(a)()}));return n},$=a(74),Y=function(e){var t=Object($.getStatistics)({simp:e,trad:e,pinyin:""}).topWords,a=e;if(t.length>0){var n=Object(g.shuffle)(t.filter((function(t){return t.word.length>e.length&&t.share>.01&&t.word.includes(e)})).map((function(e){return e.word})));console.log(n),n.length>0&&(a+="\uff0c"+n.slice(0,3).map((function(t){return t+"\u7684"+e})).join("\uff0c"))}return a},ee=a(32),te=a.n(ee),ae=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(){return Object(z.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"borderStrokeWidth",value:function(){return Math.max(2,Math.min(40,Math.floor((this.props.size||100)/50)))}},{key:"render",value:function(){return r.a.createElement("g",null,r.a.createElement("line",{x1:this.borderStrokeWidth(),y1:this.borderStrokeWidth(),x2:(this.props.size||100)-this.borderStrokeWidth(),y2:(this.props.size||100)-this.borderStrokeWidth(),stroke:"lightpink"}),r.a.createElement("line",{x1:(this.props.size||100)-this.borderStrokeWidth(),y1:this.borderStrokeWidth(),x2:this.borderStrokeWidth(),y2:(this.props.size||100)-this.borderStrokeWidth(),stroke:"lightpink"}),r.a.createElement("line",{x1:(this.props.size||100)/2,y1:this.borderStrokeWidth(),x2:(this.props.size||100)/2,y2:(this.props.size||100)-this.borderStrokeWidth(),stroke:"lightpink"}),r.a.createElement("line",{x1:this.borderStrokeWidth(),y1:(this.props.size||100)/2,x2:(this.props.size||100)-this.borderStrokeWidth(),y2:(this.props.size||100)/2,stroke:"lightpink"}),r.a.createElement("line",{x1:this.borderStrokeWidth(),y1:this.borderStrokeWidth(),x2:this.borderStrokeWidth(),y2:(this.props.size||100)-this.borderStrokeWidth(),strokeLinecap:"round",strokeWidth:this.borderStrokeWidth(),stroke:"pink"}),r.a.createElement("line",{x1:(this.props.size||100)-this.borderStrokeWidth(),y1:this.borderStrokeWidth(),x2:(this.props.size||100)-this.borderStrokeWidth(),y2:(this.props.size||100)-this.borderStrokeWidth(),strokeLinecap:"round",strokeWidth:this.borderStrokeWidth(),stroke:"pink"}),r.a.createElement("line",{x1:this.borderStrokeWidth(),y1:this.borderStrokeWidth(),x2:(this.props.size||100)-this.borderStrokeWidth(),y2:this.borderStrokeWidth(),strokeLinecap:"butt",strokeWidth:this.borderStrokeWidth(),stroke:"pink"}),r.a.createElement("line",{x1:this.borderStrokeWidth(),y1:(this.props.size||100)-this.borderStrokeWidth(),x2:(this.props.size||100)-this.borderStrokeWidth(),y2:(this.props.size||100)-this.borderStrokeWidth(),strokeLinecap:"butt",strokeWidth:this.borderStrokeWidth(),stroke:"pink"}))}}]),a}(r.a.Component),ne=a(41),re=a.n(ne),ie=a(34),se=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e,n){var i;return Object(z.a)(this,a),(i=t.call(this,e))._isMounted=!1,i.selfRef=r.a.createRef(),i.state={},i}return Object(O.a)(a,[{key:"click",value:function(){this.props.clickPlay&&this.writer&&!this.state.writing&&this.writer.animateCharacter()}},{key:"quiz",value:function(){var e=this,t=new Promise((function(t,a){e.props.quiz&&e.writer?(e.setState({writing:!0}),e.writer.quiz({onComplete:t})):a()}));return t.then((function(t){e._isMounted&&e.setState({writing:!1})})),t}},{key:"showWriter",value:function(){this.writer._options.width===this.props.size&&this.writer._options.height===this.props.size&&this.writer._char===this.props.char||(this.writer._options.width=this.props.size,this.writer._options.height=this.props.size,this.writer.setCharacter(this.props.char||"\u5b57"))}},{key:"componentDidMount",value:function(){this._isMounted=!0,console.log("Hanzi.componentDidMount",this.props.char,this.props.size),this.writer=te.a.create(this.selfRef.current,this.props.char||"\u5b57",{width:this.props.size,height:this.props.size,padding:5,showOutline:!0,charDataLoader:ie.b})}},{key:"componentDidUpdate",value:function(){this.showWriter()}},{key:"componentWillUnmount",value:function(){this.writer=null,this._isMounted=!1}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(g.isEqual)(this.props,e)||!Object(g.isEqual)(this.state,t)}},{key:"render",value:function(){return r.a.createElement("span",{className:"hanzi-container"},r.a.createElement("center",null,this.props.showPinyin?r.a.createElement("h1",{style:{fontSize:this.props.size/4||25}},re()(this.props.char,{heteronym:!0}).join(" ")):null,r.a.createElement("svg",{ref:this.selfRef,xmlns:"http://www.w3.org/2000/svg",width:this.props.size||100,height:this.props.size||100,onClick:this.click.bind(this)},r.a.createElement(ae,{size:this.props.size||100,strokeWidth:3}))))}}]),a}(r.a.Component);se.defaultProps={clickPlay:!1,showPinyin:!0,size:100,char:"\u5b57",quiz:!1};var oe=se,ce=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(){return Object(z.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(D.a,null,r.a.createElement(M.a,null,this.props.chars.map((function(t,a){return r.a.createElement(N.a,{className:"mb-3",key:a},r.a.createElement(oe,{key:a.toString(),name:a.toString(),size:e.props.size,char:t}))}))))}}]),a}(r.a.Component);ce.defaultProps={size:100,chars:[]};var le=ce;function he(e,t,a,n,r){var i=document.createElementNS("http://www.w3.org/2000/svg","g"),s=te.a.getScalingTransform(a,a);i.setAttributeNS(null,"transform",s.transform),e.appendChild(i),t.forEach((function(e,a){var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d",e),s.style.fill=a+1===t.length?r:n,i.appendChild(s)}))}var ue=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e,n){var i;return Object(z.a)(this,a),(i=t.call(this,e)).selfRef=r.a.createRef(),i.state={},i}return Object(O.a)(a,[{key:"showWriter",value:function(){this.selfRef.current.lastElementChild&&this.selfRef.current.removeChild(this.selfRef.current.lastElementChild),he(this.selfRef.current,this.props.strokes,this.props.size,this.props.color,this.props.lastColor)}},{key:"componentDidMount",value:function(){var e=this.selfRef,t=this.props,a=t.strokes,n=t.size,r=t.color,i=t.lastColor;this.props.strokes instanceof Array?he(e.current,this.props.strokes,n,r,i):te.a.loadCharacterData(this.props.char).then((function(t){he(e.current,t.strokes.slice(0,a),n,r,i)}))}},{key:"componentDidUpdate",value:function(){this.showWriter()}},{key:"componentWillUnmount",value:function(){this.writer=null,this.selfRef.current.lastElementChild&&this.selfRef.current.removeChild(this.selfRef.current.lastElementChild)}},{key:"render",value:function(){return r.a.createElement("span",{className:"hanzi-container"},r.a.createElement("svg",{ref:this.selfRef,className:"mt-1 mr-1",xmlns:"http://www.w3.org/2000/svg",width:this.props.size||100,height:this.props.size||100},r.a.createElement(ae,{size:this.props.size||100,strokeWidth:2})))}}]),a}(r.a.Component);ue.defaultProps={color:"#555",lastColor:"#f00",size:100,strokes:3,char:"\u5b57"};var pe=ue,me=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(z.a)(this,a),(n=t.call(this,e))._mounted=!1,n.state={strokes:[]},n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this._mounted=!0;var e=this;te.a.loadCharacterData(this.props.char,{charDataLoader:ie.b}).then((function(t){e._mounted&&e.setState({strokes:t.strokes})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.char!==e.char&&te.a.loadCharacterData(this.props.char,{charDataLoader:ie.b}).then((function(e){a._mounted&&a.setState({strokes:e.strokes})}))}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.strokes.map((function(t,a){return r.a.createElement(pe,{key:a.toString(),name:a.toString(),size:e.props.size,char:e.props.char,strokes:e.state.strokes.slice(0,a+1)})})))}}]),a}(r.a.Component),de=a(25),fe=a.n(de),ge=a(126),ke=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e,n){var r;return Object(z.a)(this,a),(r=t.call(this,e))._isMounted=!1,r.state={speaking:!1},r}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.autoSpeak&&this.doSpeak()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"doSpeak",value:function(){var e=this;!this.props.doubleSpeak&&this.state.speaking||(this.setState({speaking:!0}),X(this.props.text,this.props.flush).then((function(t){e._isMounted&&e.setState({speaking:!1})})))}},{key:"render",value:function(){return r.a.createElement("span",{onClick:this.doSpeak.bind(this)},this.props.text," ",r.a.createElement(ge.a,{pill:!0,variant:"info",className:this.state.speaking?"blinking":""},r.a.createElement(_.a,null)))}}]),a}(r.a.Component);ke.defaultProps={autoSpeak:!1,doubleSpeak:!1,flush:!1};var Ee=ke,ye=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e,n){return Object(z.a)(this,a),t.call(this,e)}return Object(O.a)(a,[{key:"text",value:function(){fe.a.locale("zh-cn");var e=fe()(),t=fe()(new Date(this.props.date)),a=fe()(new Date(this.props.finishDate)),n="\u5f00\u59cb\u4e8e";return n+=e.diff(t)<fe.a.duration(1,"days")?t.fromNow():t.calendar(),n+=this.props.finishDate?"\uff0c\u5b66\u4e60\u65f6\u95f4\uff1a"+fe.a.duration(t.diff(a)).humanize()+"\u3002":"\uff0c\u6ca1\u6709\u5b8c\u6210\u3002",n+="\u5b66\u4e60\u65b0\u5b57\uff1a",n+=this.props.newChar.join("\u3001")}},{key:"render",value:function(){return r.a.createElement(P.a.Item,{variant:this.props.finishDate?"success":"secondary"},r.a.createElement(Ee,{text:this.text()}))}}]),a}(r.a.Component),ve=a(136),be=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(){return Object(z.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement(ve.a,null,this.props.progress().map((function(e,t){return r.a.createElement(ve.a,Object.assign({key:t},e))})))}}]),a}(r.a.Component),Qe=a(133),we=a(134);function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ce(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Se=r.a.createElement("g",null,r.a.createElement("line",{x1:2,y1:2,x2:48,y2:48,stroke:"lightpink"}),r.a.createElement("line",{x1:48,y1:2,x2:2,y2:48,stroke:"lightpink"}),r.a.createElement("line",{x1:25,y1:2,x2:25,y2:48,stroke:"lightpink"}),r.a.createElement("line",{x1:2,y1:25,x2:48,y2:25,stroke:"lightpink"}),r.a.createElement("line",{x1:2,y1:2,x2:2,y2:48,strokeLinecap:"round",strokeWidth:2,stroke:"pink"}),r.a.createElement("line",{x1:48,y1:2,x2:48,y2:48,strokeLinecap:"round",strokeWidth:2,stroke:"pink"}),r.a.createElement("line",{x1:2,y1:2,x2:48,y2:2,strokeLinecap:"butt",strokeWidth:2,stroke:"pink"}),r.a.createElement("line",{x1:2,y1:48,x2:48,y2:48,strokeLinecap:"butt",strokeWidth:2,stroke:"pink"})),je=r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"mask-637"},r.a.createElement("path",{d:"M 467 799 Q 497 777 529 750 Q 545 737 564 739 Q 576 740 580 756 Q 584 774 571 807 Q 556 841 457 853 Q 438 854 432 852 Q 426 846 429 832 Q 435 819 467 799 Z"})),r.a.createElement("clipPath",{id:"mask-638"},r.a.createElement("path",{d:"M 277 656 Q 277 677 254 696 Q 236 712 233 686 Q 237 656 194 602 Q 149 554 165 507 Q 166 498 171 491 Q 184 464 206 491 Q 221 512 268 623 L 277 656 Z"})),r.a.createElement("clipPath",{id:"mask-639"},r.a.createElement("path",{d:"M 268 623 Q 289 611 326 619 Q 476 665 705 681 Q 730 684 741 681 Q 759 668 756 661 Q 756 657 725 583 Q 718 570 725 565 Q 732 561 749 573 Q 804 613 850 627 Q 887 640 887 649 Q 886 659 812 712 Q 788 730 707 714 Q 503 690 373 668 Q 324 661 277 656 C 247 653 239 632 268 623 Z"})),r.a.createElement("clipPath",{id:"mask-640"},r.a.createElement("path",{d:"M 518 399 Q 642 495 669 501 Q 688 508 683 524 Q 680 540 614 578 Q 595 588 572 580 Q 511 558 418 532 Q 393 525 335 527 Q 311 528 319 508 Q 326 495 346 483 Q 377 467 411 486 Q 433 493 546 534 Q 559 538 571 532 Q 584 525 578 511 Q 545 465 508 409 C 491 384 494 381 518 399 Z"})),r.a.createElement("clipPath",{id:"mask-641"},r.a.createElement("path",{d:"M 551 333 Q 536 381 518 399 L 508 409 Q 498 419 487 424 Q 477 431 471 423 Q 467 419 474 405 Q 490 371 500 328 L 507 289 Q 525 120 490 66 Q 489 65 487 62 Q 478 58 377 89 Q 367 92 360 88 Q 354 87 370 74 Q 437 19 475 -30 Q 493 -49 511 -40 Q 535 -27 553 27 Q 578 120 558 293 L 551 333 Z"})),r.a.createElement("clipPath",{id:"mask-642"},r.a.createElement("path",{d:"M 558 293 Q 718 311 889 296 Q 911 293 918 301 Q 925 314 914 325 Q 886 352 844 371 Q 831 377 806 369 Q 737 356 667 346 Q 600 340 551 333 L 500 328 Q 491 331 308 309 Q 241 299 139 298 Q 126 299 124 288 Q 123 276 141 262 Q 157 250 187 238 Q 197 234 214 242 Q 230 246 303 259 Q 393 280 507 289 L 558 293 Z"})),r.a.createElement("clipPath",{id:"mask-643"},r.a.createElement("path",{d:"M 467 799 Q 497 777 529 750 Q 545 737 564 739 Q 576 740 580 756 Q 584 774 571 807 Q 556 841 457 853 Q 438 854 432 852 Q 426 846 429 832 Q 435 819 467 799 Z"})),r.a.createElement("clipPath",{id:"mask-644"},r.a.createElement("path",{d:"M 277 656 Q 277 677 254 696 Q 236 712 233 686 Q 237 656 194 602 Q 149 554 165 507 Q 166 498 171 491 Q 184 464 206 491 Q 221 512 268 623 L 277 656 Z"})),r.a.createElement("clipPath",{id:"mask-645"},r.a.createElement("path",{d:"M 268 623 Q 289 611 326 619 Q 476 665 705 681 Q 730 684 741 681 Q 759 668 756 661 Q 756 657 725 583 Q 718 570 725 565 Q 732 561 749 573 Q 804 613 850 627 Q 887 640 887 649 Q 886 659 812 712 Q 788 730 707 714 Q 503 690 373 668 Q 324 661 277 656 C 247 653 239 632 268 623 Z"})),r.a.createElement("clipPath",{id:"mask-646"},r.a.createElement("path",{d:"M 518 399 Q 642 495 669 501 Q 688 508 683 524 Q 680 540 614 578 Q 595 588 572 580 Q 511 558 418 532 Q 393 525 335 527 Q 311 528 319 508 Q 326 495 346 483 Q 377 467 411 486 Q 433 493 546 534 Q 559 538 571 532 Q 584 525 578 511 Q 545 465 508 409 C 491 384 494 381 518 399 Z"})),r.a.createElement("clipPath",{id:"mask-647"},r.a.createElement("path",{d:"M 551 333 Q 536 381 518 399 L 508 409 Q 498 419 487 424 Q 477 431 471 423 Q 467 419 474 405 Q 490 371 500 328 L 507 289 Q 525 120 490 66 Q 489 65 487 62 Q 478 58 377 89 Q 367 92 360 88 Q 354 87 370 74 Q 437 19 475 -30 Q 493 -49 511 -40 Q 535 -27 553 27 Q 578 120 558 293 L 551 333 Z"})),r.a.createElement("clipPath",{id:"mask-648"},r.a.createElement("path",{d:"M 558 293 Q 718 311 889 296 Q 911 293 918 301 Q 925 314 914 325 Q 886 352 844 371 Q 831 377 806 369 Q 737 356 667 346 Q 600 340 551 333 L 500 328 Q 491 331 308 309 Q 241 299 139 298 Q 126 299 124 288 Q 123 276 141 262 Q 157 250 187 238 Q 197 234 214 242 Q 230 246 303 259 Q 393 280 507 289 L 558 293 Z"})),r.a.createElement("clipPath",{id:"mask-649"},r.a.createElement("path",{d:"M 467 799 Q 497 777 529 750 Q 545 737 564 739 Q 576 740 580 756 Q 584 774 571 807 Q 556 841 457 853 Q 438 854 432 852 Q 426 846 429 832 Q 435 819 467 799 Z"})),r.a.createElement("clipPath",{id:"mask-650"},r.a.createElement("path",{d:"M 277 656 Q 277 677 254 696 Q 236 712 233 686 Q 237 656 194 602 Q 149 554 165 507 Q 166 498 171 491 Q 184 464 206 491 Q 221 512 268 623 L 277 656 Z"})),r.a.createElement("clipPath",{id:"mask-651"},r.a.createElement("path",{d:"M 268 623 Q 289 611 326 619 Q 476 665 705 681 Q 730 684 741 681 Q 759 668 756 661 Q 756 657 725 583 Q 718 570 725 565 Q 732 561 749 573 Q 804 613 850 627 Q 887 640 887 649 Q 886 659 812 712 Q 788 730 707 714 Q 503 690 373 668 Q 324 661 277 656 C 247 653 239 632 268 623 Z"})),r.a.createElement("clipPath",{id:"mask-652"},r.a.createElement("path",{d:"M 518 399 Q 642 495 669 501 Q 688 508 683 524 Q 680 540 614 578 Q 595 588 572 580 Q 511 558 418 532 Q 393 525 335 527 Q 311 528 319 508 Q 326 495 346 483 Q 377 467 411 486 Q 433 493 546 534 Q 559 538 571 532 Q 584 525 578 511 Q 545 465 508 409 C 491 384 494 381 518 399 Z"})),r.a.createElement("clipPath",{id:"mask-653"},r.a.createElement("path",{d:"M 551 333 Q 536 381 518 399 L 508 409 Q 498 419 487 424 Q 477 431 471 423 Q 467 419 474 405 Q 490 371 500 328 L 507 289 Q 525 120 490 66 Q 489 65 487 62 Q 478 58 377 89 Q 367 92 360 88 Q 354 87 370 74 Q 437 19 475 -30 Q 493 -49 511 -40 Q 535 -27 553 27 Q 578 120 558 293 L 551 333 Z"})),r.a.createElement("clipPath",{id:"mask-654"},r.a.createElement("path",{d:"M 558 293 Q 718 311 889 296 Q 911 293 918 301 Q 925 314 914 325 Q 886 352 844 371 Q 831 377 806 369 Q 737 356 667 346 Q 600 340 551 333 L 500 328 Q 491 331 308 309 Q 241 299 139 298 Q 126 299 124 288 Q 123 276 141 262 Q 157 250 187 238 Q 197 234 214 242 Q 230 246 303 259 Q 393 280 507 289 L 558 293 Z"}))),ze=function(e){var t=e.svgRef,a=e.title,n=Ce(e,["svgRef","title"]);return r.a.createElement("svg",Le({width:50,height:50,ref:t},n),a?r.a.createElement("title",null,a):null,Se,je,r.a.createElement("g",{transform:"     translate(5, 40.15625)     scale(0.0390625, -0.0390625)   "},r.a.createElement("g",{style:{opacity:1}},r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-637)",d:"M 348.6 888.7 L 526 800 L 561 758",stroke:"rgba(221,221,221,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"253.05873874133732,253.05873874133732",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-638)",d:"M 218.4 787.7 L 253 657 L 241 622 L 200 553 L 187 494",stroke:"rgba(221,221,221,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"312.8483114013953,312.8483114013953",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-639)",d:"M 189.8 576.3 L 293 637 L 486 672 L 741 701 L 783 687 L 798 672 L 802 657 L 730 572",stroke:"rgba(221,221,221,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"764.9196647142758,764.9196647142758",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-640)",d:"M 240.6 559.7 L 352 504 L 385 502 L 561 556 L 598 550 L 621 525 L 607 501 L 520 411",stroke:"rgba(221,221,221,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"566.1697677375822,566.1697677375822",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-641)",d:"M 424.2 501.7 L 515 363 L 532 295 L 540 206 L 539 138 L 523 51 L 498 16 L 365 85",stroke:"rgba(221,221,221,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"674.4971861431178,674.4971861431178",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-642)",d:"M 40.1 314.3 L 197 268 L 374 297 L 822 337 L 861 329 L 907 310",stroke:"rgba(221,221,221,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"882.3239842299746,882.3239842299746",style:{opacity:1,strokeDashoffset:0}})),r.a.createElement("g",{style:{opacity:1}},r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-643)",d:"M 348.6 888.7 L 526 800 L 561 758",stroke:"rgba(85,85,85,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"253.05873874133732,253.05873874133732",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-644)",d:"M 218.4 787.7 L 253 657 L 241 622 L 200 553 L 187 494",stroke:"rgba(85,85,85,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"312.8483114013953,312.8483114013953",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-645)",d:"M 189.8 576.3 L 293 637 L 486 672 L 741 701 L 783 687 L 798 672 L 802 657 L 730 572",stroke:"rgba(85,85,85,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"764.9196647142758,764.9196647142758",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-646)",d:"M 240.6 559.7 L 352 504 L 385 502 L 561 556 L 598 550 L 621 525 L 607 501 L 520 411",stroke:"rgba(85,85,85,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"566.1697677375822,566.1697677375822",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-647)",d:"M 424.2 501.7 L 515 363 L 532 295 L 540 206 L 539 138 L 523 51 L 498 16 L 365 85",stroke:"rgba(85,85,85,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"674.4971861431178,674.4971861431178",style:{opacity:1,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-648)",d:"M 40.1 314.3 L 197 268 L 374 297 L 822 337 L 861 329 L 907 310",stroke:"rgba(85,85,85,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"882.3239842299746,882.3239842299746",style:{opacity:1,strokeDashoffset:0}})),r.a.createElement("g",{style:{opacity:1}},r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-649)",d:"M 348.6 888.7 L 526 800 L 561 758",stroke:"rgba(170,170,255,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"253.05873874133732,253.05873874133732",style:{opacity:0,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-650)",d:"M 218.4 787.7 L 253 657 L 241 622 L 200 553 L 187 494",stroke:"rgba(170,170,255,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"312.8483114013953,312.8483114013953",style:{opacity:0,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-651)",d:"M 189.8 576.3 L 293 637 L 486 672 L 741 701 L 783 687 L 798 672 L 802 657 L 730 572",stroke:"rgba(170,170,255,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"764.9196647142758,764.9196647142758",style:{opacity:0,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-652)",d:"M 240.6 559.7 L 352 504 L 385 502 L 561 556 L 598 550 L 621 525 L 607 501 L 520 411",stroke:"rgba(170,170,255,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"566.1697677375822,566.1697677375822",style:{opacity:0,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-653)",d:"M 424.2 501.7 L 515 363 L 532 295 L 540 206 L 539 138 L 523 51 L 498 16 L 365 85",stroke:"rgba(170,170,255,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"674.4971861431178,674.4971861431178",style:{opacity:0,strokeDashoffset:0}}),r.a.createElement("path",{clipPath:"url(http://localhost:3000/#mask-654)",d:"M 40.1 314.3 L 197 268 L 374 297 L 822 337 L 861 329 L 907 310",stroke:"rgba(170,170,255,1)",strokeWidth:200,fill:"none",strokeLinecap:"round",strokeLinejoin:"miter",strokeDasharray:"882.3239842299746,882.3239842299746",style:{opacity:0,strokeDashoffset:0}}))))},Oe=r.a.forwardRef((function(e,t){return r.a.createElement(ze,Le({svgRef:t},e))})),xe=(a.p,function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(){return Object(z.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Qe.a,{bg:"light",expand:"sm"},r.a.createElement(Qe.a.Brand,{href:"#home"},r.a.createElement(Oe,null)," ","\u5b66\u5199\u6c49\u5b57"),r.a.createElement(Qe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Qe.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(we.a,{variant:"pills",defaultActiveKey:"/home"},this.props.entries.map((function(t,a){return r.a.createElement(we.a.Item,{key:a},r.a.createElement(we.a.Link,{href:"#",eventKey:"link-"+a.toString(),active:e.props.activeTab===a,onClick:function(){return e.props.onChange(a)}},t.name))})))))}}]),a}(r.a.Component));xe.defaultPros={activeTab:0,onChange:function(e){return 0},entries:[{name:"Tab1"},{name:"Tab2"}]};var We=xe,De=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(z.a)(this,a),(n=t.call(this,e)).hanzi=null,n._isMounted=!1,n.state={curIndex:0,chars:["\u9e21","\u7c73","\u82b1","\u9999"],replayed:0,writing:!1},n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"prevChar",value:function(){console.log("prevChar",this.state.curIndex),this.setState({curIndex:this.state.curIndex-1,writing:!1})}},{key:"nextChar",value:function(){console.log("nextChar",this.state.curIndex),this.setState({curIndex:this.state.curIndex+1,writing:!1})}},{key:"play",value:function(){var e=this.props.newChars[this.state.curIndex],t=Y(e);console.log(t),X(t)}},{key:"startQuiz",value:function(){var e=this;console.log("startQuiz",this.hanzi),this.hanzi&&(this.setState({writing:!0}),this.hanzi.quiz().then((function(t){e._isMounted&&e.setState({writing:!1})})))}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{fluid:!0},r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,{xs:12,md:3},r.a.createElement("h1",null,"\u4eca\u65e5\u6c49\u5b57")),r.a.createElement(N.a,null,r.a.createElement(P.a,{horizontal:!0},this.props.newChars.map((function(t,a){return r.a.createElement(P.a.Item,{key:a.toString(),active:a===e.state.curIndex,onClick:function(){return e.setState({curIndex:a,writing:!1})}},t)}))))),r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(D.a,null,r.a.createElement(oe,{ref:function(t){return e.hanzi=t},size:this.props.optimalCharSize,char:this.props.newChars[this.state.curIndex],clickPlay:!this.state.writing,quiz:!0}),r.a.createElement(me,{size:30,char:this.props.newChars[this.state.curIndex]})))),r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(I.a,{className:"d-flex"},r.a.createElement(R.a,{variant:"primary",disabled:0===this.state.curIndex,onClick:this.prevChar.bind(this)},r.a.createElement(T.b,null)),window.speechSynthesis&&"function"===typeof window.speechSynthesis.speak?r.a.createElement(R.a,{variant:"success",onClick:this.play.bind(this)},r.a.createElement(_.a,null)):null,r.a.createElement(R.a,{variant:"warning",disabled:this.state.writing,onClick:this.startQuiz.bind(this)},r.a.createElement(q.a,null)),r.a.createElement(R.a,{variant:"primary",disabled:this.state.curIndex===this.props.newChars.length-1,onClick:this.nextChar.bind(this)},r.a.createElement(T.c,null))))))}}]),a}(r.a.Component),Me=Object(o.b)((function(e){return{newChars:G(e)}}),{})(De),Ne=a(131),Pe=a(19),Ie=a.n(Pe),Re=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(z.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={begin:!1,passedChars:[],judging:!1},n}return Object(O.a)(a,[{key:"changeNewIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.newListIndex;this.setState({begin:!1,passedChars:[]}),this.props.changeNew(e),this.props.prepareRecognise(["L"+e],[-29,-14,-7,-3,-1].map((function(t){return e+t})).filter((function(e){return e>=0})).map((function(e){return"L"+e.toString()})))}},{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this.setState({begin:!1,passedChars:[]}),this.props.prepareRecognise(["L"+this.props.newListIndex],[-29,-14,-7,-3,-1].map((function(t){return e.props.newListIndex+t})).filter((function(e){return e>=0})).map((function(e){return"L"+e.toString()}))),Ie.a){console.log("initialize annyang");var t={"\u524d":function(t){e.changeNewIndex(e.props.newListIndex-1)},"\u540e":function(t){e.changeNewIndex(e.props.newListIndex+1)},"\u5f00\u59cb\u6d4b\u8bd5":this.startRecognise.bind(this)};Ie.a.addCommands(t),Ie.a.start()}}},{key:"componentDidUpdate",value:function(e,t,a){}},{key:"componentWillUnmount",value:function(){Ie.a&&Ie.a.abort(),this._isMounted=!1}},{key:"startRecognise",value:function(){var e=this;if(this.setState({begin:!0,judging:!1}),this.props.startRecognise(),Ie.a){var t=this.recognise.bind(this,!1),a={"\u4e0d\u8ba4\u8bc6":t,"\u4e0d\u77e5\u9053":t,"\u8fd9\u4e2a\u5b57\u662f*hanzi":function(t){var a=re()(t,{heteronym:!0}).shift();console.log("candidates",a);var n=re()(e.props.quizQueue[0],{heteronym:!0}).shift();console.log("correct",n);var r=n.filter((function(e){return new Set(a).has(e)}));console.log("same",r),r.length>0?(console.log("yes"),e.recognise(!0)):(console.log("no"),e.recognise(!1)),console.log("\u6c49\u5b57"+t)}};Ie.a.addCommands(a,!0)}}},{key:"randomOf",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"randomCompliments",value:function(){return this.props.settings.complimentsEnabled?this.randomOf(this.props.settings.compliments):""}},{key:"randomEncouragement",value:function(){return this.props.settings.encouragementEnabled?this.randomOf(this.props.settings.encouragement):""}},{key:"recognise",value:function(e){var t=this;this.setState({judging:!0});var a=e?"\u7b54\u5bf9\u4e86!"+this.randomCompliments():this.randomEncouragement()+"\uff0c\u8fd9\u4e2a\u5b57\u5ff5"+this.props.quizQueue[0];X(a).then((function(a){t._isMounted&&(t.setState({judging:!1}),t.props.quizQueue.length>0&&(t.props.recognise(t.props.quizQueue[0],e),e&&t.setState({passedChars:[].concat(Object(h.a)(t.state.passedChars),[t.props.quizQueue[0]])})))}))}},{key:"progress",value:function(e){var t=new Set(this.props.newChars.concat(this.props.reviewChars)).size,a=new Set(this.props.quizQueue);return[{variant:"",now:100*(t-a.size)/t,label:"".concat(t-a.size,"/").concat(t)},{variant:"success",now:100*new Set(Object(h.a)(this.state.passedChars).filter((function(e){return a.has(e)}))).size/t,label:"".concat(new Set(Object(h.a)(this.state.passedChars).filter((function(e){return a.has(e)}))).size)},{variant:"warning",now:100*this.props.wrongChars.length/t,label:"".concat(this.props.wrongChars.length)}]}},{key:"play",value:function(){if(this.props.quizQueue.length>0){var e=this.props.quizQueue[0],t=this.props.settings.wordsEnabled?Y(e):e;console.log(t),X(t)}}},{key:"recentRecogniseHistory",value:function(){var e=[];return this.props.recogniseHistory instanceof Array&&(e=e.concat(this.props.recogniseHistory.slice(-5))),e.reverse()}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{fluid:!0},this.state.begin?r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(be,{progress:this.progress.bind(this)}))),r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(Ee,{text:"\u8bf7\u8ba4\u4e00\u8ba4\uff0c\u8fd9\u4e2a\u662f\u4ec0\u4e48\u5b57\u554a",autoSpeak:!0}))),r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(D.a,null,r.a.createElement(oe,{replay:0,size:this.props.optimalCharSize,char:this.props.quizQueue.length>0?this.props.quizQueue[0]:null,showPinyin:!1}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(N.a,null,r.a.createElement("center",null,r.a.createElement("h1",null,"\u4eca\u65e5\u751f\u5b57")))),r.a.createElement(M.a,null,r.a.createElement(N.a,null,r.a.createElement(I.a,{className:"d-flex"},r.a.createElement(R.a,{variant:"primary",onClick:function(t){return e.changeNewIndex(e.props.newListIndex-1)}},r.a.createElement(T.b,null)),r.a.createElement(le,{chars:this.props.newChars,size:50,className:"mb-2"}),r.a.createElement(R.a,{variant:"primary",onClick:function(t){return e.changeNewIndex(e.props.newListIndex+1)}},r.a.createElement(T.c,null))))),r.a.createElement(M.a,null,r.a.createElement(N.a,null,r.a.createElement("center",null,r.a.createElement("h1",null,"\u4eca\u65e5\u590d\u4e60")))),r.a.createElement(M.a,null,r.a.createElement(N.a,null,r.a.createElement(le,{chars:this.props.reviewChars,size:50})))),r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(I.a,{className:"d-flex"},this.state.begin?r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{variant:"primary",onClick:this.recognise.bind(this,!0),disabled:this.state.judging},r.a.createElement(T.e,null)),window.speechSynthesis&&"function"===typeof window.speechSynthesis.speak?r.a.createElement(R.a,{variant:"success",onClick:this.play.bind(this)},r.a.createElement(_.a,null)):null,r.a.createElement(R.a,{variant:"primary",onClick:this.recognise.bind(this,!1),disabled:this.state.judging},r.a.createElement(T.d,null))):r.a.createElement(R.a,{variant:"primary",onClick:this.startRecognise.bind(this)},r.a.createElement(T.e,null),"\xa0\u5f00\u59cb\u6d4b\u8bd5")))),!this.state.begin&&r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(P.a,null,this.recentRecogniseHistory().map((function(e,t){return r.a.createElement(P.a.Item,Object.assign({key:t,as:ye},e))}))))),r.a.createElement(Ne.a,{size:"sm",show:0===this.props.quizQueue.length&&this.state.begin,onHide:this.changeNewIndex.bind(this)},r.a.createElement(Ne.a.Header,{closeButton:!0},r.a.createElement(Ne.a.Title,null,r.a.createElement(Ee,{text:"\u606d\u559c\u4f60\uff01\u5b8c\u6210\u4e86\uff01",autoSpeak:!0}))),r.a.createElement(Ne.a.Body,null,r.a.createElement(_.b,{size:this.props.optimalCharSize/2||32}))))}}]),a}(r.a.Component);Re.defaultProps={quizQueue:[]};var Te=Object(o.b)((function(e){return{newChars:G(e),reviewChars:(t=e,H(t)?H(t).reviewChar:[]),quizQueue:Z(e),newListIndex:J(e),wrongChars:U(e),recogniseHistory:B(e),settings:K(e)};var t}),{prepareRecognise:function(e,t){return{type:"PREPARE_RECOGNISE",payload:{newList:e,reviewList:t}}},startRecognise:function(){return{type:"START_RECOGNISE",payload:{}}},recognise:function(e,t){return{type:"RECOGNISE",payload:{theChar:e,recognised:t}}},changeNew:function(e){return{type:"CHANGE_NEW",payload:{newListIndex:e}}}})(Re),_e=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(){return Object(z.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"recentRecogniseHistory",value:function(){var e=[];return this.props.recogniseHistory instanceof Array&&(e=e.concat(this.props.recogniseHistory.slice(-5))),e.reverse()}},{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(P.a,null,this.recentRecogniseHistory().map((function(e,t){return r.a.createElement(P.a.Item,Object.assign({key:t,as:ye},e))}))))))}}]),a}(r.a.Component),qe=Object(o.b)((function(e){return{recogniseHistory:B(e)}}),{})(_e),Ae=(r.a.Component,a(81)),He=a.n(Ae),Ge=a(129),Ue=a(132),Ze=a(130),Fe=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(z.a)(this,a),(n=t.call(this,e)).state={newCompliment:"",newEncouragement:""},n}return Object(O.a)(a,[{key:"booleanEnabled",value:function(e,t){this.props.changeSettings(e,t.target.checked)}},{key:"removeCompliments",value:function(e){var t=Object(h.a)(this.props.settings.compliments);t.splice(e,1),this.props.changeSettings("compliments",t)}},{key:"changeNewCompliment",value:function(e){this.setState({newCompliment:e.target.value})}},{key:"addCompliment",value:function(){var e=[].concat(Object(h.a)(this.props.settings.compliments),[this.state.newCompliment]);this.props.changeSettings("compliments",e)}},{key:"removeEncouragement",value:function(e){var t=Object(h.a)(this.props.settings.encouragement);t.splice(e,1),this.props.changeSettings("encouragement",t)}},{key:"changeNewEncouragement",value:function(e){this.setState({newEncouragement:e.target.value})}},{key:"addEncouragement",value:function(){var e=[].concat(Object(h.a)(this.props.settings.encouragement),[this.state.newEncouragement]);this.props.changeSettings("encouragement",e)}},{key:"version",value:function(){fe.a.locale("zh-cn");var e=fe.a.unix(1591544863).format("LLLL");return"\u5f53\u524d\u7248\u672c: ".concat("0.1.0"," \u751f\u6210\u4e8e ").concat(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{fluid:!0},r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(Ge.a,{variant:"primary"},this.version()),r.a.createElement(Ge.a,{variant:"info"},"\u5f53\u524d\u7f13\u5b58\u5b57\u5e93\u5bb9\u91cf",He()(Object(ie.a)())))),r.a.createElement(M.a,{className:"mt-1"},r.a.createElement(N.a,null,r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Group,null,r.a.createElement(Ue.a.Check,{checked:this.props.settings.complimentsEnabled,type:"switch",id:"complimentsEnabled",label:"\u7b54\u5bf9\u65f6\u7ed9\u4e88\u79f0\u8d5e",onChange:this.booleanEnabled.bind(this,"complimentsEnabled")}),this.props.settings.complimentsEnabled&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{variant:"flush"},this.props.settings.compliments instanceof Array&&this.props.settings.compliments.map((function(t,a){return r.a.createElement(P.a.Item,{key:a.toString()},r.a.createElement(Ee,{text:t}),r.a.createElement(R.a,{className:"float-right",onClick:function(t){return e.removeCompliments(a)}},r.a.createElement(T.f,null)))}))),r.a.createElement(Ze.a,null,r.a.createElement(Ue.a.Control,{type:"text",value:this.state.newCompliment,onChange:this.changeNewCompliment.bind(this),placeholder:"\u65b0\u7684\u79f0\u8d5e\u8bed"}),r.a.createElement(Ze.a.Append,null,r.a.createElement(R.a,{variant:"outline-info",onClick:X.bind(this,this.state.newCompliment,!0)},r.a.createElement(_.a,null)),r.a.createElement(R.a,{onClick:this.addCompliment.bind(this)},r.a.createElement(T.a,null)))))),r.a.createElement(Ue.a.Group,null,r.a.createElement(Ue.a.Check,{checked:this.props.settings.encouragementEnabled,type:"switch",id:"encouragementEnabled",label:"\u7b54\u9519\u65f6\u7ed9\u4e88\u9f13\u52b1",onChange:this.booleanEnabled.bind(this,"encouragementEnabled")}),this.props.settings.encouragementEnabled&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{variant:"flush"},this.props.settings.encouragement instanceof Array&&this.props.settings.encouragement.map((function(t,a){return r.a.createElement(P.a.Item,{key:a.toString()},r.a.createElement(Ee,{text:t}),r.a.createElement(R.a,{className:"float-right",onClick:function(t){return e.removeEncouragement(a)}},r.a.createElement(T.f,null)))}))),r.a.createElement(Ze.a,null,r.a.createElement(Ue.a.Control,{type:"text",value:this.state.newEncouragement,onChange:this.changeNewEncouragement.bind(this),placeholder:"\u65b0\u7684\u9f13\u52b1\u8bed"}),r.a.createElement(Ze.a.Append,null,r.a.createElement(R.a,{variant:"outline-info",onClick:X.bind(this,this.state.newEncouragement,!0)},r.a.createElement(_.a,null)),r.a.createElement(R.a,{onClick:this.addEncouragement.bind(this)},r.a.createElement(T.a,null)))))),r.a.createElement(Ue.a.Group,null,r.a.createElement(Ue.a.Check,{checked:this.props.settings.wordsEnabled,type:"switch",id:"wordsEnabled",label:"\u63d0\u793a\u65f6\u7ed9\u51fa\u8bcd\u7ec4\u793a\u4f8b",onChange:this.booleanEnabled.bind(this,"wordsEnabled")})),r.a.createElement(Ue.a.Group,null,r.a.createElement(R.a,{variant:"danger",onClick:this.props.resetSettings.bind(this)},"\u91cd\u7f6e\u8bbe\u7f6e"))))))}}]),a}(r.a.Component),Je=Object(o.b)((function(e){return{settings:K(e)}}),{changeSettings:function(e,t){return{type:"CHANGE_SETTINGS",payload:{key:e,value:t}}},resetSettings:function(){return{type:"RESET_SETTINGS",payload:{}}}})(Fe),Be=function(e){Object(x.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(z.a)(this,a),(n=t.call(this,e)).navListEntries=[{name:"\u751f\u5b57\u5b66\u4e60"},{name:"\u8ba4\u5b57\u6d4b\u8bd5"},{name:"\u5b66\u4e60\u5386\u53f2"},{name:"\u8bbe\u7f6e"}],n.state={activeTab:0,width:0,height:0,optimalCharSize:100},n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.deboucedUpdateWindowDimensions=Object(g.debounce)(this.updateWindowDimensions.bind(this),200),this.updateWindowDimensions(),window.addEventListener("resize",this.deboucedUpdateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.deboucedUpdateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){var e=Math.max(100,.8*Math.min(window.innerWidth,window.innerHeight));this.setState({optimalCharSize:e})}},{key:"onTabChange",value:function(e){this.setState({activeTab:e})}},{key:"renderPage",value:function(){switch(this.state.activeTab){default:case 0:return r.a.createElement(Me,{optimalCharSize:this.state.optimalCharSize});case 1:return r.a.createElement(Te,{optimalCharSize:this.state.optimalCharSize});case 2:return r.a.createElement(qe,{optimalCharSize:this.state.optimalCharSize});case 3:return r.a.createElement(Je,{optimalCharSize:this.state.optimalCharSize})}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{entries:this.navListEntries,activeTab:this.state.activeTab,onChange:this.onTabChange.bind(this),variant:"tabs",defaultActiveKey:"/home"}),this.renderPage())}}]),a}(r.a.Component),Ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}window.addEventListener("load",(function(){Ie.a&&Ie.a.setLanguage("zh-CN")})),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:j},r.a.createElement(Be,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/learn-to-write-chinese-pages",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/learn-to-write-chinese-pages","/service-worker.js");Ke?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ve(t,e)}))}}()},34:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=null,r=function(){if(null===n){n={data:{},changes:0};try{var e=localStorage.getItem("charDataCache");null!==e&&(n.data=JSON.parse(e))}catch(t){console.log("hanziDataLoader.getCache",t)}}return n},i=function(t,a,n){var i=r();t in i.data?a(i.data[t]):function(t,a,n){var r=new e.XMLHttpRequest;r.overrideMimeType&&r.overrideMimeType("application/json"),r.open("GET",function(e){return"https://cdn.jsdelivr.net/npm/hanzi-writer-data@".concat("2.0","/").concat(e,".json")}(t),!0),r.onerror=function(e){n(r,e)},r.onreadystatechange=function(){4===r.readyState&&(200===r.status?a(JSON.parse(r.responseText)):0!==r.status&&n&&n(r))},r.send(null)}(t,(function(e){!function(e,t){var a=r();if(a.data[e]=t,a.changes++,a.changes>20){a.changes=0;try{var n=JSON.stringify(a.data);localStorage.setItem("charDataCache",n),console.log("saveState",n.slice(0,100))}catch(i){console.log("hanziDataLoader.getCache",i)}}}(t,e),a(e)}),n)},s=function(){try{return localStorage.getItem("charDataCache").length}catch(e){console.log("hanziDataLoader.cacheSize",e)}return 0}}).call(this,a(39))},82:function(e,t,a){e.exports=a(122)}},[[82,1,2]]]);