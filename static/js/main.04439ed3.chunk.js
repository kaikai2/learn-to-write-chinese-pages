(this["webpackJsonplearn-to-write-chinese"]=this["webpackJsonplearn-to-write-chinese"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);for(var a=n(1),r=n.n(a),i=n(15),s=n.n(i),o=n(20),c=n(30),l=n(42),u=n(14),h=n(23),p="\u91cc \u540e \u8c22 \u8fb9 \u8c8c \u73ed \u5e7c \u56ed \u7167 \u5a46 \u751c \u68a6 \u8001 \u76d2 \u5c3a \u5200 \u65f6 \u6b63 \u6587 \u5177 \u7b14 \u753b \u957f \u653e \u7528 \u603b \u5c3e \u5df4 \u7389 \u5c16 \u7af9 \u82d7 \u542c \u8bdd \u7334 \u7329\u7ed9 \u8fdb \u544a \u7535 \u8bc9 \u5ff5 \u996d \u4e56 \u60f3\u9762 \u4f4f \u524d \u4ece \u540c \u6ca1 \u9001 \u679c \u5de5\u5382 \u4ea7 \u52a8 \u5173 \u627e \u6309 \u5e74 \u8282 \u6843\u8377 \u83ca \u6885 \u51b7 \u5b83 \u6015 \u8eb2 \u52c7 \u6562\u5806 \u4ed7 \u67f3 \u519c \u6c11 \u4f2f \u79cd \u6700 \u7247\u5439 \u6d47 \u71d5 \u7761 \u9192 \u86d9 \u5471 \u5357 \u6905\u5750 \u8eab \u5427 \u684c \u5e03 \u62b1 \u6454 \u58f0 \u8c01\u5462 \u8ba4 \u539f \u75db \u558a \u72fc \u5566 \u8d76 \u6551\u5047 \u6389 \u8def \u78b0 \u54ea \u5440 \u4e24 \u9003 \u8d70\u5979 \u70b9 \u97f3 \u53ef \u4f38 \u7f1d \u5939 \u6839 \u68cd\u4e22 \u7070 \u841d \u535c \u719f \u62d4 \u62c9 \u9f20 \u5495\u549a \u5012 \u62ac \u665a \u5de6 \u53f3 \u600e \u4e48 \u529e\u77e5 \u9053 \u5348 \u8fd9 \u5ea7 \u6d1e \u4ec0 \u5bb3 \u4ed8 \u9876 \u89d2 \u6b7b \u6251 \u671f \u5e26 \u5206 \u6e05 \u4eca \u6628 \u5149 \u9634 \u9519 \u6307 \u62c7 \u98df \u65e0 \u540d\u52a0 \u5171 \u4e8b \u5e2e \u997f \u809a \u72ee \u89c9 \u6bdb\u6c42 \u7b49 \u9999 \u8089 \u5f20 \u7f51 \u54ac \u529b \u554a\u7259 \u5634 \u6f02 \u80e1 \u864e \u8d34 \u624d \u6570 \u66f4\u6735 \u7eb8 \u5706 \u5708 \u4eb2 \u8138 \u773c \u775b \u63a5 \u5916 \u7b28 \u4ee5 \u81ea \u5df1 \u6162 \u96be \u7ec3 \u6bcf \u9897 \u6837 \u56e0 \u4e3a \u79bb \u8fd1 \u8c61 \u8239 \u95ea\u91d1 \u7f8e \u4e3d \u5f53 \u6247 \u6ee1 \u5e72 \u671d \u718a\u5a03 \u6c7d \u8f66 \u5317 \u4eac \u5f80 \u545c \u9e7f \u68ee\u6797 \u91c7 \u8611 \u83c7 \u7bee \u76f4 \u6478 \u82d4 \u6240\u79d1 \u706f \u5e94 \u8be5 \u9898 \u505c \u800c \u7a97 \u521a \u649e \u6bd4 \u8bb0 \u4e32 \u88ab \u591f \u547d \u9888 \u5b9a \u5413 \u5544 \u7834 \u6e56 \u68f5 \u74dc \u900f \u817f \u72d0\u7c97 \u7aff \u72f8 \u8ddf \u9493 \u7529 \u94a9 \u5fd8 \u88c5\u9975 \u7b97 \u6876 \u574f \u5fd9 \u6d17 \u5ffd \u7136 \u5168\u6761 \u602a \u7269 \u732a \u5f71 \u4fe1 \u547c \u7ed3 \u51b0\u679d \u53d1 \u6296 \u6696 \u5c4b \u6cd5 \u4ef6 \u4e8e \u677e\u5e3d \u6234 \u70ed \u5019 \u52b3 \u6d41 \u6c57 \u51c9 \u522b\u6574 \u8fd8 \u89c9 \u76d6 \u601c \u7a9d \u7740 \u75c5 \u53d7\u7fbd \u671b \u9a91 \u884c \u8fdc \u7ecf \u65c1 \u5a76 \u5475\u7a00 \u5947 \u795d \u8d3a \u54df \u8111 \u5446 \u5e8a \u95f9\u949f \u62e8 \u51c6 \u5907 \u5176 \u5b9e \u8f7b \u54cd \u8fdf\u5df2 \u53e0 \u5305 \u7897 \u5199 \u5192 \u60a8 \u4e86".split(/ */),m=1,d={length:0},f=0;f<p.length;f+=3)d["L"+m.toString()]=p[f]+p[f+1]+p[f+2],m++;d.length=m-1,console.log(d);var g=n(21),v={newChar:[],reviewChar:[],charsToLearn:{},quizQueue:[],seed:0,recogniseHistory:[]};function E(e){var t=1e4*Math.sin(e);return t-Math.floor(t)}function y(e,t){for(var n=e.length;n;){var a=Math.floor(E(t++)*n),r=e[--n];e[n]=e[a],e[a]=r}return{array:e,seed:t}}var b={newListIndex:56},k={complimentsEnabled:!0,compliments:["","\u4f60\u771f~\u68d2\u554a!","\u5389~\u5bb3","\u8bb0\u6027~\u4e0d\u9519","\u68d2\u68d2\u68d2","\u8fd8\u771f\u662f\u96be\u4e0d\u5012\u4f60\u554a","\u4f60\u8bb0\u4f4f\u4e86\uff5e\u8bf6"],encouragementEnabled:!0,encouragement:["\b","\u518d\u60f3\u60f3\u770b","\u54ce\u5440\uff0c\u7b54\u9519\u4e86"],wordsEnabled:!1,maxWords:3},w=Object(c.b)({chars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PREPARE_RECOGNISE":console.log("reducers.chars",t.payload);var n=t.payload,a=n.newList,r=n.reviewList,i=a.map((function(e){return d[e]})).join("").split(""),s=r.map((function(e){return d[e]})).join("").split(""),o=y(i.concat(s),e.seed),c=o.array,p=o.seed,m=i.concat(c);return Object(h.a)({},e,{newChar:i,reviewChar:s,charsToLearn:i.concat(s).reduce((function(e,t,n,a){return e[t]={tried:0,recognised:!1},e}),{}),quizQueue:m,seed:p});case"START_RECOGNISE":var f=e.recogniseHistory instanceof Array?e.recogniseHistory:[],b=e.newChar instanceof Array?e.newChar:[],k=e.reviewChar instanceof Array?e.reviewChar:[];return Object(h.a)({},e,{recogniseHistory:[].concat(Object(u.a)(f),[{date:new Date,newChar:b,reviewChar:k,finishDate:null}])});case"RECOGNISE":var w=t.payload,C=w.theChar,S=w.recognised;if(C!==e.quizQueue[0])return console.log("Exception! theChar should be the first in queue"),e;var j=e.quizQueue.slice(1),O=e.seed,z=e.recogniseHistory;if(S){if(0===j.length){var x=z[z.length-1];z=[].concat(Object(u.a)(z.slice(0,-1)),[Object(h.a)({},x,{finishDate:new Date})])}}else if(j.length>3){var N=Math.floor(E(O++)*(j.length-3))+3;j.push(j[N]),j[N]=C}else{var I=y(Object(g.filter)(Object(g.toPairs)(e.charsToLearn),(function(e){return e[1].recognised})).map((function(e){return e[0]})),O),R=I.array,L=I.newSeed;O=L,(j=j.concat(R.slice(0,3-j.length))).push(C)}return Object(h.a)({},e,{charsToLearn:Object(h.a)({},e.charsToLearn,Object(l.a)({},C,{tried:e.charsToLearn[C].tried+1,recognised:S})),quizQueue:j,seed:O,recogniseHistory:z});default:return e}},charSheets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NEW":console.log("reducers.charSheets",t.payload);var n=t.payload.newListIndex;return n<1?n=1:n>=d.length&&(n=d.length),Object(h.a)({},e,{newListIndex:n});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SETTINGS":console.log("reducers.settings",t.payload);var n=t.payload,a=n.key,r=n.value,i=Object(h.a)({},e);return i[a]=r,i;case"RESET_SETTINGS":return k;default:return e}}}),C=n(65),S=n.n(C),j=function(){try{var e=localStorage.getItem("state");if(null===e)return void console.log("loadState, state is null");console.log("loadState",e);var t=JSON.parse(e);return console.log("loadState, pared:",t),t}catch(n){return void console.log("loadState, caught err:",n)}}(),O=Object(c.c)(w,j);O.subscribe(S()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t),console.log("saveState",t.slice(0,100))}catch(n){console.log("saveState, caught err:",n)}}(O.getState())}),1e3));var z=O,x=(n(90),n(91),n(7)),N=n(8),I=n(10),R=n(9),L=(n(92),n(113)),W=n(114),T=n(68),D=n(123),M=n(116),H=n(117),_=n(12),A=n(22),q=n(39),P=function(e){return e.chars},Q=function(e){return P(e)?P(e).newChar:[]},G=function(e){return P(e)?Object.entries(P(e).charsToLearn).filter((function(e){var t=Object(q.a)(e,2),n=(t[0],t[1]);return!n.recognised&&n.tried>0})).map((function(e){var t=Object(q.a)(e,2),n=t[0];t[1];return n})):[]},U=function(e){return P(e)?P(e).quizQueue:[]},F=function(e){return e.charSheets},B=function(e){return F(e)&&F(e).newListIndex||1},J=function(e){return P(e)?P(e).recogniseHistory:[]},K=function(e){return e.settings},V={synth:null,voice:null,utterances:[]},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,a=new Promise((function(a,r){if(V.synth||(V.synth=window.speechSynthesis),V.synth&&"function"===typeof V.synth.speak&&!V.voice){var i=V.synth.getVoices().filter((function(e){return e.lang.startsWith("zh")}));console.log(i);var s=Array.prototype.concat.apply([],["zh-CN","zh-HK","zh-TW"].map((function(e){return i.filter((function(t){return t.lang===e}))})));s.length>0&&(V.voice=s[0])}if(V.voice){var o=new SpeechSynthesisUtterance(e);o.voice=V.voice,o.onend=a.bind(n),V.synth.speaking||(V.utterances.length=0),V.utterances.push(o),t&&V.synth.cancel(),V.synth.speak(o)}else console.log("speak.reject"),r.bind(n)()}));return a},X=n(66),Y=function(e){var t=Object(X.getStatistics)({simp:e,trad:e,pinyin:""}).topWords,n=e;if(t.length>0){var a=Object(g.shuffle)(t.filter((function(t){return t.word.length>e.length&&t.share>.01&&t.word.includes(e)})).map((function(e){return e.word})));console.log(a),a.length>0&&(n+="\uff0c"+a.slice(0,3).map((function(t){return t+"\u7684"+e})).join("\uff0c"))}return n},Z=n(28),ee=n.n(Z),te=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"borderStrokeWidth",value:function(){return Math.max(2,Math.min(40,Math.floor((this.props.size||100)/25)))}},{key:"render",value:function(){return r.a.createElement("g",null,r.a.createElement("line",{x1:"0",y1:"0",x2:this.props.size||100,y2:this.props.size||100,stroke:"lightpink"}),r.a.createElement("line",{x1:this.props.size||100,y1:"0",x2:"0",y2:this.props.size||100,stroke:"lightpink"}),r.a.createElement("line",{x1:(this.props.size||100)/2,y1:"0",x2:(this.props.size||100)/2,y2:this.props.size||100,stroke:"lightpink"}),r.a.createElement("line",{x1:"0",y1:(this.props.size||100)/2,x2:this.props.size||100,y2:(this.props.size||100)/2,stroke:"lightpink"}),r.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:this.props.size||100,strokeWidth:this.borderStrokeWidth(),stroke:"pink"}),r.a.createElement("line",{x1:this.props.size||100,y1:"0",x2:this.props.size||100,y2:this.props.size||100,strokeWidth:this.borderStrokeWidth(),stroke:"pink"}),r.a.createElement("line",{x1:"0",y1:"0",x2:this.props.size||100,y2:"0",strokeWidth:this.borderStrokeWidth(),stroke:"pink"}),r.a.createElement("line",{x1:"0",y1:this.props.size||100,x2:this.props.size||100,y2:this.props.size||100,strokeWidth:this.borderStrokeWidth(),stroke:"pink"}))}}]),n}(r.a.Component),ne=n(36),ae=n.n(ne),re=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e)).selfRef=r.a.createRef(),i.state={},i}return Object(N.a)(n,[{key:"click",value:function(){this.props.clickPlay&&this.writer&&this.writer.animateCharacter()}},{key:"showWriter",value:function(){this.writer._options.width=this.props.size,this.writer._options.height=this.props.size,this.writer.setCharacter(this.props.char||"\u5b57")}},{key:"componentDidMount",value:function(){console.log("Hanzi.componentDidMount",this.props.char,this.props.size),this.writer=ee.a.create(this.selfRef.current,this.props.char||"\u5b57",{width:this.props.size,height:this.props.size,padding:5,showOutline:!0})}},{key:"componentDidUpdate",value:function(){this.showWriter()}},{key:"componentWillUnmount",value:function(){this.writer=null}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(g.isEqual)(this.props,e)||!Object(g.isEqual)(this.state,t)}},{key:"render",value:function(){return r.a.createElement("span",{className:"hanzi-container"},r.a.createElement("center",null,this.props.showPinyin?r.a.createElement("h1",{style:{fontSize:this.props.size/4||25}},ae()(this.props.char,{heteronym:!0}).join(" ")):null,r.a.createElement("svg",{ref:this.selfRef,xmlns:"http://www.w3.org/2000/svg",width:this.props.size||100,height:this.props.size||100,onClick:this.click.bind(this)},r.a.createElement(te,{size:this.props.size||100,strokeWidth:3}))))}}]),n}(r.a.Component);re.defaultProps={clickPlay:!1,showPinyin:!0,size:100,char:"\u5b57"};var ie=re,se=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(L.a,null,r.a.createElement(W.a,null,this.props.chars.map((function(t,n){return r.a.createElement(T.a,{className:"mb-3",key:n},r.a.createElement(ie,{key:n.toString(),name:n.toString(),size:e.props.size,char:t}))}))))}}]),n}(r.a.Component);se.defaultProps={size:100,chars:[]};var oe=se;function ce(e,t,n,a,r){var i=document.createElementNS("http://www.w3.org/2000/svg","g"),s=ee.a.getScalingTransform(n,n);i.setAttributeNS(null,"transform",s.transform),e.appendChild(i),t.forEach((function(e,n){var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d",e),s.style.fill=n+1===t.length?r:a,i.appendChild(s)}))}var le=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e)).selfRef=r.a.createRef(),i.state={},i}return Object(N.a)(n,[{key:"showWriter",value:function(){this.selfRef.current.lastElementChild&&this.selfRef.current.removeChild(this.selfRef.current.lastElementChild),ce(this.selfRef.current,this.props.strokes,this.props.size,this.props.color,this.props.lastColor)}},{key:"componentDidMount",value:function(){var e=this.selfRef,t=this.props,n=t.strokes,a=t.size,r=t.color,i=t.lastColor;this.props.strokes instanceof Array?ce(e.current,this.props.strokes,a,r,i):ee.a.loadCharacterData(this.props.char).then((function(t){ce(e.current,t.strokes.slice(0,n),a,r,i)}))}},{key:"componentDidUpdate",value:function(){this.showWriter()}},{key:"componentWillUnmount",value:function(){this.writer=null,this.selfRef.current.lastElementChild&&this.selfRef.current.removeChild(this.selfRef.current.lastElementChild)}},{key:"render",value:function(){return r.a.createElement("span",{className:"hanzi-container"},r.a.createElement("svg",{ref:this.selfRef,className:"mt-1 mr-1",xmlns:"http://www.w3.org/2000/svg",width:this.props.size||100,height:this.props.size||100},r.a.createElement(te,{size:this.props.size||100,strokeWidth:2})))}}]),n}(r.a.Component);le.defaultProps={color:"#555",lastColor:"#f00",size:100,strokes:3,char:"\u5b57"};var ue=le,he=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e))._mounted=!1,a.state={strokes:[]},a}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0;var e=this;ee.a.loadCharacterData(this.props.char).then((function(t){e._mounted&&e.setState({strokes:t.strokes})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.char!==e.char&&ee.a.loadCharacterData(this.props.char).then((function(e){n._mounted&&n.setState({strokes:e.strokes})}))}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.strokes.map((function(t,n){return r.a.createElement(ue,{key:n.toString(),name:n.toString(),size:e.props.size,char:e.props.char,strokes:e.state.strokes.slice(0,n+1)})})))}}]),n}(r.a.Component),pe=n(24),me=n.n(pe),de=n(115),fe=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,a){var r;return Object(x.a)(this,n),(r=t.call(this,e))._isMounted=!1,r.state={speaking:!1},r}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.autoSpeak&&this.doSpeak()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"doSpeak",value:function(){var e=this;!this.props.doubleSpeak&&this.state.speaking||(this.setState({speaking:!0}),$(this.props.text,this.props.flush).then((function(t){e._isMounted&&e.setState({speaking:!1})})))}},{key:"render",value:function(){return r.a.createElement("span",{onClick:this.doSpeak.bind(this)},this.props.text," ",r.a.createElement(de.a,{pill:!0,variant:"info",className:this.state.speaking?"blinking":""},r.a.createElement(A.a,null)))}}]),n}(r.a.Component);fe.defaultProps={autoSpeak:!1,doubleSpeak:!1,flush:!1};var ge=fe,ve=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,a){return Object(x.a)(this,n),t.call(this,e)}return Object(N.a)(n,[{key:"text",value:function(){me.a.locale("zh-cn");var e=me()(),t=me()(new Date(this.props.date)),n=me()(new Date(this.props.finishDate)),a="\u5f00\u59cb\u4e8e";return a+=e.diff(t)<me.a.duration(1,"days")?t.fromNow():t.calendar(),a+=this.props.finishDate?"\uff0c\u5b66\u4e60\u65f6\u95f4\uff1a"+me.a.duration(t.diff(n)).humanize()+"\u3002":"\uff0c\u6ca1\u6709\u5b8c\u6210\u3002",a+="\u5b66\u4e60\u65b0\u5b57\uff1a",a+=this.props.newChar.join("\u3001")}},{key:"render",value:function(){return r.a.createElement(D.a.Item,{variant:this.props.finishDate?"success":"secondary"},r.a.createElement(ge,{text:this.text()}))}}]),n}(r.a.Component),Ee=n(124),ye=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return r.a.createElement(Ee.a,null,this.props.progress().map((function(e,t){return r.a.createElement(Ee.a,Object.assign({key:t},e))})))}}]),n}(r.a.Component),be=n(122),ke=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{variant:"tabs",defaultActiveKey:"/home"},this.props.entries.map((function(t,n){return r.a.createElement(be.a.Item,{key:n},r.a.createElement(be.a.Link,{href:"#",eventKey:"link-"+n.toString(),active:e.props.activeTab===n,onClick:function(){return e.props.onChange(n)}},t.name))})))}}]),n}(r.a.Component);ke.defaultPros={activeTab:0,onChange:function(e){return 0},entries:[{name:"Tab1"},{name:"Tab2"}]};var we=ke,Ce=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={curIndex:0,chars:["\u9e21","\u7c73","\u82b1","\u9999"],replayed:0},a}return Object(N.a)(n,[{key:"prevChar",value:function(){console.log("prevChar",this.state.curIndex),this.setState({curIndex:this.state.curIndex-1})}},{key:"nextChar",value:function(){console.log("nextChar",this.state.curIndex),this.setState({curIndex:this.state.curIndex+1})}},{key:"play",value:function(){var e=this.props.newChars[this.state.curIndex],t=Y(e);console.log(t),$(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{fluid:!0},r.a.createElement(W.a,null,r.a.createElement(T.a,{xs:8,md:3},r.a.createElement("h1",null,"\u4eca\u65e5\u6c49\u5b57")),r.a.createElement(T.a,null,r.a.createElement(D.a,{horizontal:!0},this.props.newChars.map((function(t,n){return r.a.createElement(D.a.Item,{key:n.toString(),active:n===e.state.curIndex,onClick:function(){return e.setState({curIndex:n})}},t)}))))),r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(L.a,null,r.a.createElement(ie,{size:this.props.optimalCharSize,char:this.props.newChars[this.state.curIndex],clickPlay:!0}),r.a.createElement(he,{size:30,char:this.props.newChars[this.state.curIndex]})))),r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(M.a,{className:"d-flex"},r.a.createElement(H.a,{variant:"primary",disabled:0===this.state.curIndex,onClick:this.prevChar.bind(this)},r.a.createElement(_.b,null)),window.speechSynthesis&&"function"===typeof window.speechSynthesis.speak?r.a.createElement(H.a,{variant:"success",onClick:this.play.bind(this)},r.a.createElement(A.a,null)):null,r.a.createElement(H.a,{variant:"primary",disabled:this.state.curIndex===this.props.newChars.length-1,onClick:this.nextChar.bind(this)},r.a.createElement(_.c,null))))))}}]),n}(r.a.Component),Se=Object(o.b)((function(e){return{newChars:Q(e)}}),{})(Ce),je=n(120),Oe=n(16),ze=n.n(Oe),xe=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.state={begin:!1,passedChars:[],judging:!1},a}return Object(N.a)(n,[{key:"changeNewIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.newListIndex;this.setState({begin:!1,passedChars:[]}),this.props.changeNew(e),this.props.prepareRecognise(["L"+e],[-29,-14,-7,-3,-1].map((function(t){return e+t})).filter((function(e){return e>=0})).map((function(e){return"L"+e.toString()})))}},{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this.setState({begin:!1,passedChars:[]}),this.props.prepareRecognise(["L"+this.props.newListIndex],[-29,-14,-7,-3,-1].map((function(t){return e.props.newListIndex+t})).filter((function(e){return e>=0})).map((function(e){return"L"+e.toString()}))),ze.a){console.log("initialize annyang");var t={"\u524d":function(t){e.changeNewIndex(e.props.newListIndex-1)},"\u540e":function(t){e.changeNewIndex(e.props.newListIndex+1)},"\u5f00\u59cb\u6d4b\u8bd5":this.startRecognise.bind(this)};ze.a.addCommands(t),ze.a.start()}}},{key:"componentDidUpdate",value:function(e,t,n){}},{key:"componentWillUnmount",value:function(){ze.a&&ze.a.abort(),this._isMounted=!1}},{key:"startRecognise",value:function(){var e=this;if(this.setState({begin:!0,judging:!1}),this.props.startRecognise(),ze.a){var t=this.recognise.bind(this,!1),n={"\u4e0d\u8ba4\u8bc6":t,"\u4e0d\u77e5\u9053":t,"\u8fd9\u4e2a\u5b57\u662f*hanzi":function(t){var n=ae()(t,{heteronym:!0}).shift();console.log("candidates",n);var a=ae()(e.props.quizQueue[0],{heteronym:!0}).shift();console.log("correct",a);var r=a.filter((function(e){return new Set(n).has(e)}));console.log("same",r),r.length>0?(console.log("yes"),e.recognise(!0)):(console.log("no"),e.recognise(!1)),console.log("\u6c49\u5b57"+t)}};ze.a.addCommands(n,!0)}}},{key:"randomOf",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"randomCompliments",value:function(){return this.props.settings.complimentsEnabled?this.randomOf(this.props.settings.compliments):""}},{key:"randomEncouragement",value:function(){return this.props.settings.encouragementEnabled?this.randomOf(this.props.settings.encouragement):""}},{key:"recognise",value:function(e){var t=this;this.setState({judging:!0});var n=e?"\u7b54\u5bf9\u4e86!"+this.randomCompliments():this.randomEncouragement()+"\uff0c\u8fd9\u4e2a\u5b57\u5ff5"+this.props.quizQueue[0];$(n).then((function(n){t._isMounted&&(t.setState({judging:!1}),t.props.quizQueue.length>0&&(t.props.recognise(t.props.quizQueue[0],e),e&&t.setState({passedChars:[].concat(Object(u.a)(t.state.passedChars),[t.props.quizQueue[0]])})))}))}},{key:"progress",value:function(e){var t=new Set(this.props.newChars.concat(this.props.reviewChars)).size,n=new Set(this.props.quizQueue);return[{variant:"",now:100*(t-n.size)/t,label:"".concat(t-n.size,"/").concat(t)},{variant:"success",now:100*new Set(Object(u.a)(this.state.passedChars).filter((function(e){return n.has(e)}))).size/t,label:"".concat(new Set(Object(u.a)(this.state.passedChars).filter((function(e){return n.has(e)}))).size)},{variant:"warning",now:100*this.props.wrongChars.length/t,label:"".concat(this.props.wrongChars.length)}]}},{key:"play",value:function(){if(this.props.quizQueue.length>0){var e=this.props.quizQueue[0],t=this.props.settings.wordsEnabled?Y(e):e;console.log(t),$(t)}}},{key:"recentRecogniseHistory",value:function(){var e=[];return this.props.recogniseHistory instanceof Array&&(e=e.concat(this.props.recogniseHistory.slice(-5))),e.reverse()}},{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{fluid:!0},this.state.begin?r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(ye,{progress:this.progress.bind(this)}))),r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(ge,{text:"\u8bf7\u8ba4\u4e00\u8ba4\uff0c\u8fd9\u4e2a\u662f\u4ec0\u4e48\u5b57\u554a",autoSpeak:!0}))),r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(L.a,null,r.a.createElement(ie,{replay:0,size:this.props.optimalCharSize,char:this.props.quizQueue.length>0?this.props.quizQueue[0]:null,showPinyin:!1}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(T.a,null,r.a.createElement("center",null,r.a.createElement(M.a,{className:"d-flex"},r.a.createElement(H.a,{variant:"primary",onClick:function(t){return e.changeNewIndex(e.props.newListIndex-1)}},r.a.createElement(_.b,null)),r.a.createElement("h1",null,"\u4eca\u65e5\u751f\u5b57"),r.a.createElement(H.a,{variant:"primary",onClick:function(t){return e.changeNewIndex(e.props.newListIndex+1)}},r.a.createElement(_.c,null)))))),r.a.createElement(W.a,null,r.a.createElement(T.a,null,r.a.createElement(oe,{chars:this.props.newChars,size:50,className:"mb-2"}))),r.a.createElement(W.a,null,r.a.createElement(T.a,null,r.a.createElement("center",null,r.a.createElement("h1",null,"\u4eca\u65e5\u590d\u4e60")))),r.a.createElement(W.a,null,r.a.createElement(T.a,null,r.a.createElement(oe,{chars:this.props.reviewChars,size:50})))),r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(M.a,{className:"d-flex"},this.state.begin?r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{variant:"primary",onClick:this.recognise.bind(this,!0),disabled:this.state.judging},r.a.createElement(_.e,null)),window.speechSynthesis&&"function"===typeof window.speechSynthesis.speak?r.a.createElement(H.a,{variant:"success",onClick:this.play.bind(this)},r.a.createElement(A.a,null)):null,r.a.createElement(H.a,{variant:"primary",onClick:this.recognise.bind(this,!1),disabled:this.state.judging},r.a.createElement(_.d,null))):r.a.createElement(H.a,{variant:"primary",onClick:this.startRecognise.bind(this)},r.a.createElement(_.e,null),"\xa0\u5f00\u59cb\u6d4b\u8bd5")))),!this.state.begin&&r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(D.a,null,this.recentRecogniseHistory().map((function(e,t){return r.a.createElement(D.a.Item,Object.assign({key:t,as:ve},e))}))))),r.a.createElement(je.a,{size:"sm",show:0===this.props.quizQueue.length&&this.state.begin,onHide:this.changeNewIndex.bind(this)},r.a.createElement(je.a.Header,{closeButton:!0},r.a.createElement(je.a.Title,null,r.a.createElement(ge,{text:"\u606d\u559c\u4f60\uff01\u5b8c\u6210\u4e86\uff01",autoSpeak:!0}))),r.a.createElement(je.a.Body,null,r.a.createElement(A.b,{size:this.props.optimalCharSize/2||32}))))}}]),n}(r.a.Component);xe.defaultProps={quizQueue:[]};var Ne=Object(o.b)((function(e){return{newChars:Q(e),reviewChars:(t=e,P(t)?P(t).reviewChar:[]),quizQueue:U(e),newListIndex:B(e),wrongChars:G(e),recogniseHistory:J(e),settings:K(e)};var t}),{prepareRecognise:function(e,t){return{type:"PREPARE_RECOGNISE",payload:{newList:e,reviewList:t}}},startRecognise:function(){return{type:"START_RECOGNISE",payload:{}}},recognise:function(e,t){return{type:"RECOGNISE",payload:{theChar:e,recognised:t}}},changeNew:function(e){return{type:"CHANGE_NEW",payload:{newListIndex:e}}}})(xe),Ie=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"recentRecogniseHistory",value:function(){var e=[];return this.props.recogniseHistory instanceof Array&&(e=e.concat(this.props.recogniseHistory.slice(-5))),e.reverse()}},{key:"render",value:function(){return r.a.createElement(L.a,null,r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(D.a,null,this.recentRecogniseHistory().map((function(e,t){return r.a.createElement(D.a.Item,Object.assign({key:t,as:ve},e))}))))))}}]),n}(r.a.Component),Re=Object(o.b)((function(e){return{recogniseHistory:J(e)}}),{})(Ie),Le=(r.a.Component,n(118)),We=n(121),Te=n(119),De=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={newCompliment:"",newEncouragement:""},a}return Object(N.a)(n,[{key:"booleanEnabled",value:function(e,t){this.props.changeSettings(e,t.target.checked)}},{key:"removeCompliments",value:function(e){var t=Object(u.a)(this.props.settings.compliments);t.splice(e,1),this.props.changeSettings("compliments",t)}},{key:"changeNewCompliment",value:function(e){this.setState({newCompliment:e.target.value})}},{key:"addCompliment",value:function(){var e=[].concat(Object(u.a)(this.props.settings.compliments),[this.state.newCompliment]);this.props.changeSettings("compliments",e)}},{key:"removeEncouragement",value:function(e){var t=Object(u.a)(this.props.settings.encouragement);t.splice(e,1),this.props.changeSettings("encouragement",t)}},{key:"changeNewEncouragement",value:function(e){this.setState({newEncouragement:e.target.value})}},{key:"addEncouragement",value:function(){var e=[].concat(Object(u.a)(this.props.settings.encouragement),[this.state.newEncouragement]);this.props.changeSettings("encouragement",e)}},{key:"version",value:function(){me.a.locale("zh-cn");var e=me.a.unix(1590922957).format("LLLL");return"\u5f53\u524d\u7248\u672c: ".concat("0.1.0"," \u751f\u6210\u4e8e ").concat(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{fluid:!0},r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(Le.a,{variant:"primary"},this.version()))),r.a.createElement(W.a,{className:"mt-1"},r.a.createElement(T.a,null,r.a.createElement(We.a,null,r.a.createElement(We.a.Group,null,r.a.createElement(We.a.Check,{checked:this.props.settings.complimentsEnabled,type:"switch",id:"complimentsEnabled",label:"\u7b54\u5bf9\u65f6\u7ed9\u4e88\u79f0\u8d5e",onChange:this.booleanEnabled.bind(this,"complimentsEnabled")}),this.props.settings.complimentsEnabled&&r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"flush"},this.props.settings.compliments instanceof Array&&this.props.settings.compliments.map((function(t,n){return r.a.createElement(D.a.Item,{key:n.toString()},r.a.createElement(ge,{text:t}),r.a.createElement(H.a,{className:"float-right",onClick:function(t){return e.removeCompliments(n)}},r.a.createElement(_.f,null)))}))),r.a.createElement(Te.a,null,r.a.createElement(We.a.Control,{type:"text",value:this.state.newCompliment,onChange:this.changeNewCompliment.bind(this),placeholder:"\u65b0\u7684\u79f0\u8d5e\u8bed"}),r.a.createElement(Te.a.Append,null,r.a.createElement(H.a,{variant:"outline-info",onClick:$.bind(this,this.state.newCompliment,!0)},r.a.createElement(A.a,null)),r.a.createElement(H.a,{onClick:this.addCompliment.bind(this)},r.a.createElement(_.a,null)))))),r.a.createElement(We.a.Group,null,r.a.createElement(We.a.Check,{checked:this.props.settings.encouragementEnabled,type:"switch",id:"encouragementEnabled",label:"\u7b54\u9519\u65f6\u7ed9\u4e88\u9f13\u52b1",onChange:this.booleanEnabled.bind(this,"encouragementEnabled")}),this.props.settings.encouragementEnabled&&r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"flush"},this.props.settings.encouragement instanceof Array&&this.props.settings.encouragement.map((function(t,n){return r.a.createElement(D.a.Item,{key:n.toString()},r.a.createElement(ge,{text:t}),r.a.createElement(H.a,{className:"float-right",onClick:function(t){return e.removeEncouragement(n)}},r.a.createElement(_.f,null)))}))),r.a.createElement(Te.a,null,r.a.createElement(We.a.Control,{type:"text",value:this.state.newEncouragement,onChange:this.changeNewEncouragement.bind(this),placeholder:"\u65b0\u7684\u9f13\u52b1\u8bed"}),r.a.createElement(Te.a.Append,null,r.a.createElement(H.a,{variant:"outline-info",onClick:$.bind(this,this.state.newEncouragement,!0)},r.a.createElement(A.a,null)),r.a.createElement(H.a,{onClick:this.addEncouragement.bind(this)},r.a.createElement(_.a,null)))))),r.a.createElement(We.a.Group,null,r.a.createElement(We.a.Check,{checked:this.props.settings.wordsEnabled,type:"switch",id:"wordsEnabled",label:"\u63d0\u793a\u65f6\u7ed9\u51fa\u8bcd\u7ec4\u793a\u4f8b",onChange:this.booleanEnabled.bind(this,"wordsEnabled")})),r.a.createElement(We.a.Group,null,r.a.createElement(H.a,{variant:"danger",onClick:this.props.resetSettings.bind(this)},"\u91cd\u7f6e\u8bbe\u7f6e"))))))}}]),n}(r.a.Component),Me=Object(o.b)((function(e){return{settings:K(e)}}),{changeSettings:function(e,t){return{type:"CHANGE_SETTINGS",payload:{key:e,value:t}}},resetSettings:function(){return{type:"RESET_SETTINGS",payload:{}}}})(De),He=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).navListEntries=[{name:"\u5b66\u5199\u6c49\u5b57"},{name:"\u6d4b\u8bd5"},{name:"\u5386\u53f2"},{name:"\u8bbe\u7f6e"}],a.state={activeTab:0,width:0,height:0,optimalCharSize:100},a}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.deboucedUpdateWindowDimensions=Object(g.debounce)(this.updateWindowDimensions.bind(this),200),this.updateWindowDimensions(),window.addEventListener("resize",this.deboucedUpdateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.deboucedUpdateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){var e=Math.max(100,.8*Math.min(window.innerWidth,window.innerHeight));this.setState({optimalCharSize:e})}},{key:"onTabChange",value:function(e){this.setState({activeTab:e})}},{key:"renderPage",value:function(){switch(this.state.activeTab){default:case 0:return r.a.createElement(Se,{optimalCharSize:this.state.optimalCharSize});case 1:return r.a.createElement(Ne,{optimalCharSize:this.state.optimalCharSize});case 2:return r.a.createElement(Re,{optimalCharSize:this.state.optimalCharSize});case 3:return r.a.createElement(Me,{optimalCharSize:this.state.optimalCharSize})}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{entries:this.navListEntries,activeTab:this.state.activeTab,onChange:this.onTabChange.bind(this),variant:"tabs",defaultActiveKey:"/home"}),this.renderPage())}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ze.a&&ze.a.setLanguage("zh-CN"),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:z},r.a.createElement(He,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n(111)},90:function(e,t,n){},92:function(e,t,n){}},[[72,1,2]]]);